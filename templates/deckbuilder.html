{% extends "_base.html" %}
{% block content %}

<div id="decklist">
	<form id="decklist_saver_form" action="/mydecklists">
		<svg class="chart" data-bar-chart data-data="" data-bar-width="8"></svg>
		<p id="curvelist"><img src="/static/assets/mana-curve.png"></p>
		<input id="deck_name_box" type="text" name="deckname" Placeholder="Enter Deck Name Here...">
		<p id="cardcounter">0 / 30</p>
		<ul id='inner_list'>
			<li></li>
		</ul>
		<p id="dustcounter">0 Dust to Craft</p>
		<p id="clearexport">
			<button type="button" onclick="resetDeck()">Reset</button>
			<button type="button" onclick="exportDeck(500, 500)" data-toggle="modal" data-target="#exportPopup">Export</button>
			<!-- <button type="button" onclick="PrepareDeck()">Save</button> -->
			<button type="button" data-toggle="modal" data-target="#writeupPopup">Save</button>
		</p>
	</form>
</div>

<div id="deckbuilder" class="container">
	<input class="search" Placeholder="Search by card name, mana cost, type, rarity, etc..."/>
	<div id="object" class="list slideLeft">
		{% for ccard in class_cards %}
		<a cardName="{{ccard.name}}" 
			href="#" 
			onclick="addCard(this); return false;" 
			imgurl="{{ccard.img}}"
			cardId="{{ccard.cardId}}"
			cardSet="{{ccard.cardSet}}"
			type="{{ccard.type}}"
			rarity="{{ccard.rarity}}"
			cost="{{ccard.cost}}"
			attack="{{ccard.attack}}"
			health="{{ccard.health}}"
			cardtext="{{ccard.text}}"
			artist="{{ccard.artist}}"
			title="{{ccard.name}}" 
		>
			<img class="builder_card" height="303" width="200" src="{{ccard.img}}">
			<p hidden class="name">{{ccard.name}}</p>
			<p hidden class="type">{{ccard.type}}</p>
			<p hidden class="cost">{{ccard.cost}}</p>
			<p hidden class="rarity">{{ccard.rarity}}</p>
			<p hidden class="race">{{ccard.race}}</p>
			<p hidden class="artist">{{ccard.artist}}</p>
			<p hidden class="cardset">{{ccard.cardSet}}</p>
			<p hidden class="mechanics">{{ccard.mechanics}}</p>
		</a>
		{% endfor %}
	<hr>
		{% for ncard in neutral_cards %}
		<a cardName="{{ncard.name}}" 
			href="#" 
			onclick="addCard(this); return false;" 
			imgurl="{{ncard.img}}"
			cardId="{{ncard.cardId}}"
			cardSet="{{ncard.cardSet}}"
			type="{{ncard.type}}"
			rarity="{{ncard.rarity}}"
			cost="{{ncard.cost}}"
			attack="{{ncard.attack}}"
			health="{{ncard.health}}"
			cardtext="{{ncard.text}}"
			artist="{{ncard.artist}}"
			title="{{ncard.name}}" 
		>
			<img class="builder_card" height="303" width="200" src="{{ncard.img}}">
			<p hidden class="name">{{ncard.name}}</p>
			<p hidden class="type">{{ncard.type}}</p>
			<p hidden class="cost">{{ncard.cost}}</p>
			<p hidden class="rarity">{{ncard.rarity}}</p>
			<p hidden class="race">{{ncard.race}}</p>
			<p hidden class="artist">{{ncard.artist}}</p>
			<p hidden class="cardset">{{ncard.cardset}}</p>
			<p hidden class="mechanics">{{ncard.mechanics}}</p>
		</a>
		{% endfor %}
	</div>
</div>

<!-- Modal -->
  <div class="modal fade" id="exportPopup" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Decklist Export</h4>
        </div>
        <div class="modal-body" id="deckbody">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>

<!-- Modal -->
  <div class="modal modal-wide fade" id="writeupPopup" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Decklist Description</h4>
        </div>
        <!-- <div class="modal-body" id="writeupbody" contenteditable="true">
        </div> -->
        <div id="txtEditor"></div>
		<script type="text/javascript">
			$(document).ready( function() {
				var editor = $("#txtEditor").Editor({'togglescreen':false});          
			});
		</script>
        <div class="modal-footer">
		  <button type="button" class="btn btn-default" id="writeupsave" onclick="PrepareDeck()">Save</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>

<script type="text/javascript">
	
	// when .modal-wide opened, set content-body height based on browser height; 200 is appx height of modal padding, modal title and button bar

	$(".modal-wide").on("show.bs.modal", function() {
	  var height = $(window).height() - 200;
	  $(this).find(".modal-body").css("max-height", height);
	});
		
</script>
<script type="text/javascript" src="/static/js/deckbuilder.js"></script>


{% endblock %}